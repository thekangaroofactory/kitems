<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Core concepts • kitems</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="core-concepts_files/libs/quarto-html/popper.min.js"></script><script src="core-concepts_files/libs/quarto-html/tippy.umd.min.js"></script><link href="core-concepts_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="core-concepts_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Core concepts">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">kitems</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/kitems.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/core-concepts.html">Core concepts</a></li>
    <li><a class="dropdown-item" href="../articles/shiny-module.html">Shiny module</a></li>
    <li><a class="dropdown-item" href="../articles/admin.html">Administration</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Core concepts</h1>





      <div class="d-none name"><code></code></div>
    </div>






    <p>The framework is based on two main concepts – <em>data model</em> and <em>items</em>.</p>
<section class="level2"><h2 id="data-model">Data Model<a class="anchor" aria-label="anchor" href="#data-model"></a>
</h2>
<p>The data model contains the specifications of the <em>items</em> to manage.</p>
<p>For each attribute, the data model carries information like its name and type, but also a method to determine its default value as well as logical values to indicate if it should be skipped in forms, displayed in the table view or used to sort the data.</p>
<p>Supported types are numeric, integer, logical, character, Date and POSIXct.</p>
<blockquote>
<p>Note: class POSIXlt is not supported as it stores datetime values into a list<br>
POSIXct should be used to store datetime attributes.</p>
</blockquote>
<section class="level3"><h3 id="structure">Structure<a class="anchor" aria-label="anchor" href="#structure"></a>
</h3>
<p>Data models have the following structure:</p>
<ul>
<li><p>Name: the name of the attribute</p></li>
<li><p>Type: the type of the attribute</p></li>
<li><p>Default value: a default value for the attribute (optional)</p></li>
<li><p>Default function: a function name (optional, without the ()!)</p></li>
<li><p>Default arg: list of arguments to pass to the default function (optional)</p></li>
<li><p>Display: whether or not the attribute should be displayed in the item table</p></li>
<li><p>Skip: whether or not the attribute should be skipped in the item form</p></li>
<li><p>Sort rank: a number to indicate that the attribute is used to sort the data</p></li>
<li><p>Sort desc: a logical if the attribute should be used in descending order</p></li>
</ul></section><section class="level3"><h3 id="mandatory-attribute">Mandatory attribute<a class="anchor" aria-label="anchor" href="#mandatory-attribute"></a>
</h3>
<p>Data models have a mandatory “id” attribute.<br>
This id is the primary key of the items, here to ensure the uniqueness of the items.</p>
<p>By default, the attribute gets a value that is generated by the ktools::getTimestamp() function.<br>
You can pass another function as long as it generates unique ids (other wise item creation will fail).</p>
</section><section class="level3"><h3 id="defaults">Defaults<a class="anchor" aria-label="anchor" href="#defaults"></a>
</h3>
<p>In many cases, an item may have attributes that do not require an input from the user:</p>
<ul>
<li><p>to generate a primary key</p></li>
<li><p>to set a default state or date</p></li>
<li><p>because the attribute is internal / hidden</p></li>
</ul>
<p>Two mechanisms are available to tune the default behavior:</p>
<ul>
<li><p>default value: a value that fits with the attribute type</p></li>
<li><p>default function: a function to generate the default value (optional arguments can be passed to the function)</p></li>
</ul>
<p>Those defaults will be used to initialize the item input form and set the attribute value in case the user lets the input empty or if the attribute is skipped.</p>
<div>
<blockquote>
<p><strong>Important</strong></p>
<p>Whenever an item is created or updated, the input values from the item form will be coerced to the type defined in the data model.</p>
<p>Make sure the default can be converted to the expected type or an error will be generated.</p>
</blockquote>
</div>
</section><section class="level3"><h3 id="integrity">Integrity<a class="anchor" aria-label="anchor" href="#integrity"></a>
</h3>
<p>When the module server is launched, it will perform an integrity check to ensure that the <em>items</em> and data model are synchronized.</p>
<p>If not, the data model will be updated to match with any missing attribute for example (it is used during the import process to extract the data model from the loaded data).</p>
</section></section><section class="level2"><h2 id="items">Items<a class="anchor" aria-label="anchor" href="#items"></a>
</h2>
<p><em>Items</em> are stored in a data frame that fits with the data model rules.<br>
This means the data model is implemented in all functions related to <em>item</em> management and any authoring operation on the items should be performed within the module server.</p>
<p>When the module server is started, items will be checked to make sure attribute types fit with the data model.</p>
</section><section class="level2"><h2 id="useful-links">Useful Links<a class="anchor" aria-label="anchor" href="#useful-links"></a>
</h2>
<ul>
<li><p>access to the data model &amp; items: (see <span style="color: yellow">xxx</span>)</p></li>
<li><p>initialization &amp; integrity: (see <span style="color: yellow">xxx</span>)</p></li>
<li><p>item workflows: (see <span style="color: yellow">xxx</span>)</p></li>
<li><p>data model governance &amp; migration: (see <span style="color: yellow">xxx</span>)</p></li>
<li><p>import data: (see <span style="color: yellow">xxx</span>)</p></li>
</ul></section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.linkedin.com/in/philippeperet/" class="external-link">Philippe Peret</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
