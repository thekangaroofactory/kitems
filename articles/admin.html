<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Administration • kitems</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="admin_files/libs/quarto-html/popper.min.js"></script><script src="admin_files/libs/quarto-html/tippy.umd.min.js"></script><link href="admin_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="admin_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Administration">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">kitems</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/kitems.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/core-concepts.html">Core concepts</a></li>
    <li><a class="dropdown-item" href="../articles/shiny-module.html">Shiny module</a></li>
    <li><a class="dropdown-item" href="../articles/admin.html">Administration</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Implementation &amp; features</h6></li>
    <li><a class="dropdown-item" href="../articles/implementations.html">Implementations</a></li>
    <li><a class="dropdown-item" href="../articles/communication.html">Communication</a></li>
    <li><a class="dropdown-item" href="../articles/workflows.html">Item workflows</a></li>
    <li><a class="dropdown-item" href="../articles/filtering.html">Filtering Items</a></li>
    <li><a class="dropdown-item" href="../articles/ordering.html">Ordering</a></li>
    <li><a class="dropdown-item" href="../articles/shortcuts.html">Shortcuts</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Administration</h1>





      <div class="d-none name"><code></code></div>
    </div>






    <p>The framework provides administration capabilities that mostly (but not only) cover data model tasks.</p>
<section class="level2"><h2 id="admin-console">Admin console<a class="anchor" aria-label="anchor" href="#admin-console"></a>
</h2>
<p>An administration console is delivered as a standalone Shiny app within the package.</p>
<p>The main reason is that in most cases, it’s not recommended to have the data model(s) management accessible from within the application. Another reason is that administration tasks are not expected to be performed on regular basis. Therefore there is no need to have the main module server and the session overloaded with reactives &amp; observers that won’t be called in the daily scenarios.</p>
<p>To run the app, use the <code><a href="../reference/admin.html">admin()</a></code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">kitems</span><span class="fu">::</span><span class="fu"><a href="../reference/admin.html">admin</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"path/to/data"</span><span class="op">)</span></span></code></pre></div>
</div>
<p>The admin console gives access to all the data models belonging to the <code>path</code> argument in one place. One tab per data model will be displayed inside the UI.</p>
<section class="level3"><h3 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h3>
<section class="level4"><h4 id="data-model">Data model<a class="anchor" aria-label="anchor" href="#data-model"></a>
</h4>
<p>The data model section displays a table of the attributes:</p>
<p><img src="images/admin_data_model.png"></p>
<p>From here, it’s possible to create or update (after row selection) an attribute thanks to the attribute wizard:</p>
<p><img src="images/admin_att_wizard.png"></p>
<p>It is meant to guide you through the attribute creation and perform checks (in particular at the default value step).</p>
<p>The danger zone toggle allows access to actions that cannot be undone:</p>
<p><img src="images/admin_danger.png"></p>
<div>
<blockquote>
<p><strong>Caution</strong></p>
<ul>
<li><p>Deleting an argument will delete the corresponding column in the item table!</p></li>
<li><p>Deleting a data model will delete the corresponding item table!</p></li>
</ul>
<p>These actions cannot be undone…</p>
</blockquote>
</div>
</section><section class="level4"><h4 id="raw-table">Raw table<a class="anchor" aria-label="anchor" href="#raw-table"></a>
</h4>
<p>The raw table section displays the item table as-is (hidden attributes are displayed).</p>
<p><img src="images/admin_raw_table.png"></p>
<p>It’s possible to reorder the attributes (the items columns) from here.</p>
</section><section class="level4"><h4 id="view">View<a class="anchor" aria-label="anchor" href="#view"></a>
</h4>
<p>The view section displays the item table as it will be available from the <code><a href="../reference/filtered_view_widget.html">filtered_view_widget()</a></code> function:</p>
<p><img src="images/admin_view.png"></p>
<ul>
<li><p>only attributes with <code>display = TRUE</code> are visible</p></li>
<li><p>mask is applied on column names (replace . and _ with space, capitalize first letter)</p></li>
</ul>
<p>You can add or remove attributes to be hidden from this view (or update the attribute in the data model section).</p>
</section></section><section class="level3"><h3 id="initialization">Initialization<a class="anchor" aria-label="anchor" href="#initialization"></a>
</h3>
<p>When the console detects an empty folder inside the provided path, it will allow you to create a new data model:</p>
<p><img src="images/admin_scratch.png"></p>
<p>You can create one from scratch or import existing data (see next section).</p>
</section><section class="level3"><h3 id="data-import">Data import<a class="anchor" aria-label="anchor" href="#data-import"></a>
</h3>
<p>It is possible to import existing data (and create the corresponding data model) through a wizard.</p>
<ul>
<li>Select the file to import (.csv)</li>
</ul>
<p><img src="images/admin_import_1.png"></p>
<ul>
<li>Check the items preview</li>
</ul>
<p><img src="images/admin_import_2.png"></p>
<ul>
<li>Check the extracted data model</li>
</ul>
<p><img src="images/admin_import_3.png"></p>
<ul>
<li>Validate import</li>
</ul>
<div>
<blockquote>
<p><strong>Important</strong></p>
<p>At this stage, the import process is not very flexible as it does not allow to tune the extracted data model, or select specific columns of the data. This needs to be done manually in a second step.</p>
<p>There is a known bug / problem after the select file step:<br>
In case the data does not contain an <code>id</code> column, unique ids will be generated but performances are poor when data contains many rows.</p>
<p>See issue <a href="https://github.com/thekangaroofactory/kitems/issues/552" target="_blank" class="external-link">Generate unique ids is slow during data import</a></p>
</blockquote>
</div>
</section><section class="level3"><h3 id="migration">Migration<a class="anchor" aria-label="anchor" href="#migration"></a>
</h3>
<p>As of version <a href="../news/index.html#kitems-v071-beta">v0.7.1</a>, data models now carry a version number that corresponds to the latest data model structure upgrade.</p>
<p>Whenever the module server detects either a data model without any version or with an obsolete version number, it will raise a warning dialog and ask for the app to be closed.</p>
<p>Data model migration is performed through the admin console. It will detect when a migration is required and display a button to run the migration procedure.</p>
<div>
<blockquote>
<p><strong>Tip</strong></p>
<p>It is recommended to run the admin console after a package upgrade to check whether a migration is needed or not.</p>
<p>It is also recommended to check the <a href="../news/index.html">changelog</a> page.</p>
</blockquote>
</div>
</section></section><section class="level2"><h2 id="behind-the-scene">Behind the scene<a class="anchor" aria-label="anchor" href="#behind-the-scene"></a>
</h2>
<p>Because the package is meant to be as flexible as possible, it is possible to access the admin components from exported functions.</p>
<div>
<blockquote>
<p><strong>Caution</strong></p>
<p>That being said, it is not recommended to wrap the admin console inside your app as it should be kept away from the users.</p>
</blockquote>
</div>
<section class="level3"><h3 id="admin-module-server">Admin module server<a class="anchor" aria-label="anchor" href="#admin-module-server"></a>
</h3>
<p>The module server function is delivered as <code><a href="../reference/kitems_admin.html">kitems_admin()</a></code> .</p>
</section><section class="level3"><h3 id="admin-ui">Admin UI<a class="anchor" aria-label="anchor" href="#admin-ui"></a>
</h3>
<p>The module UI component is wrapped in the <code><a href="../reference/admin_widget.html">admin_widget()</a></code> function.</p>
</section></section><section class="level2"><h2 id="useful-links">Useful Links<a class="anchor" aria-label="anchor" href="#useful-links"></a>
</h2>
<ul>
<li>Admin argument – <a href="./shiny-module.html#admin">shiny module</a>
</li>
<li>Data model – <a href="./core-concepts.html#data-model">core concepts</a>
</li>
</ul></section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.linkedin.com/in/philippeperet/" class="external-link">Philippe Peret</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
